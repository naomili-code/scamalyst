<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Analyze Messages â€” ScamSensei</title>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js"></script>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-container">
        <h1 class="logo">ğŸ§  ScamSensei</h1>
        <ul class="nav-links">
          <li><a href="home.html">Home</a></li>
          <li><a href="analyze.html" class="active">Analyze</a></li>
          <li><a href="practice.html">Practice</a></li>
          <li><a href="about.html">About & Ethics</a></li>
          <button class="dark-mode-toggle" id="darkModeToggle" title="Toggle dark mode">ğŸŒ™</button>
        </ul>
      </div>
    </nav>

    <main class="container analyze-page">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;flex-wrap:wrap;gap:1rem">
        <h2 style="margin:0">Analyze Content</h2>
        <div class="analysis-mode-toggle">
          <button id="modeMessage" class="mode-btn active" data-mode="message">ğŸ“§ Message</button>
          <button id="modeWebsite" class="mode-btn" data-mode="website">ğŸŒ Website</button>
        </div>
      </div>

      <!-- Input Panel -->
      <section class="input-panel">
        <div id="messageMode" class="analysis-mode">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="4" y="8" width="40" height="32" rx="2" stroke="#556cd6" stroke-width="2"/>
              <path d="M4 14H44" stroke="#556cd6" stroke-width="2"/>
              <rect x="8" y="20" width="28" height="12" rx="1" fill="#556cd6" opacity="0.3"/>
            </svg>
            <div>
              <h3 style="margin: 0; color: var(--primary);">ğŸ“§ Analyze Message</h3>
              <p style="margin: 0.25rem 0 0 0; font-size: 0.85rem; color: var(--muted);">Paste any email, text, or DM</p>
            </div>
          </div>
          <label for="message">Your Message</label>
          <textarea id="message" rows="10" placeholder="Paste an email, text, DM, or social media message here..." aria-describedby="messageHint"></textarea>
          <p id="messageHint" style="font-size:12px;color:#666;margin-top:8px">Tip: Try pasting suspicious messages from your email spam folder or a phishing email you received.</p>
        </div>

        <div id="websiteMode" class="analysis-mode hidden">
          <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem;">
            <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="4" y="6" width="40" height="36" rx="2" stroke="#9b59b6" stroke-width="2"/>
              <path d="M4 18H44" stroke="#9b59b6" stroke-width="2"/>
              <circle cx="12" cy="12" r="1.5" fill="#9b59b6"/>
              <circle cx="20" cy="12" r="1.5" fill="#9b59b6"/>
              <circle cx="28" cy="12" r="1.5" fill="#9b59b6"/>
            </svg>
            <div>
              <h3 style="margin: 0; color: var(--primary);">ğŸŒ Analyze Website</h3>
              <p style="margin: 0.25rem 0 0 0; font-size: 0.85rem; color: var(--muted);">Check URL or HTML source</p>
            </div>
          </div>
          <label for="websiteInput">Website URL or HTML</label>
          <textarea id="websiteInput" rows="5" placeholder="Paste a website URL (e.g., https://example.com) or paste the HTML source code..." aria-describedby="websiteHint"></textarea>
          <p id="websiteHint" style="font-size:12px;color:#666;margin-top:8px">Tip: Enter a suspicious website URL or paste its HTML source to analyze for scam indicators.</p>
        </div>

        <div class="input-controls">
          <button id="analyzeBtn" class="btn btn-primary" aria-label="Analyze the message for scams and AI">Analyze</button>
          <button id="clearBtn" class="btn btn-secondary">Clear</button>
          <label for="exampleSelect" style="margin-left:auto;display:none" id="exampleLabel">Try an example:</label>
          <select id="exampleSelect" style="display:none">
            <option value="">-- Choose an example --</option>
            <option value="scam">Phishing Scam</option>
            <option value="ai-chatgpt">AI-Generated (ChatGPT)</option>
            <option value="ai-formal">AI-Generated (Formal)</option>
            <option value="human-casual">Human Writing (Casual)</option>
            <option value="human-professional">Human Writing (Professional)</option>
          </select>
        </div>
      </section>

      <!-- Results Panel -->
      <section id="result" class="result-panel hidden" aria-live="polite" aria-label="Analysis results">
        
        <!-- Score Meters -->
        <div class="score-section">
          <div class="score-meter">
            <p><strong id="scoreLabel">Scam Risk Score</strong></p>
            <div class="meter" aria-label="Scam risk meter">
              <div id="meterFill" class="meter-fill" style="background:linear-gradient(90deg,#2ecc71,#f1c40f,#e74c3c)"></div>
            </div>
            <p id="scamScore" class="score-label">0/10</p>
          </div>

          <div class="score-meter" id="aiMeterContainer">
            <p><strong>AI Likelihood Score</strong></p>
            <div class="meter" aria-label="AI likelihood meter">
              <div id="aiMeterFill" class="meter-fill" style="background:linear-gradient(90deg,#3498db,#9b59b6)"></div>
            </div>
            <p id="aiScore" class="score-label">0%</p>
          </div>
        </div>

        <!-- Red Flags -->
        <div class="red-flags-section">
          <h4>ğŸš© Red Flags Detected</h4>
          <ul id="reasons" role="region" aria-label="Detection reasons" class="red-flags-list"></ul>
        </div>

      </section>

      <!-- Empty State -->
      <section id="emptyState" class="empty-state">
        <p>ğŸ‘† Paste a message above and click "Analyze" to get started.</p>
      </section>

    </main>

    <footer>
      <p>&copy; 2026 ScamSensei | Made for the Girls Who Code Challenge</p>
      <p style="font-size:12px;margin-top:8px">This tool provides guidance, not guarantees. Always verify suspicious messages independently.</p>
    </footer>

    <button class="fab" id="fabBtn" onclick="event.stopPropagation(); toggleFABMenu();" title="Get help with scam detection">â“</button>
    <div class="fab-menu" id="fabMenu">
      <a href="#" onclick="showHelp('scam'); closeFABMenu(); return false;">ğŸš© Common Scam Types</a>
      <a href="#" onclick="showHelp('ai'); closeFABMenu(); return false;">ğŸ¤– AI Detection Tips</a>
      <a href="#" onclick="showHelp('url'); closeFABMenu(); return false;">ğŸ”— Website Analysis</a>
      <a href="practice.html" onclick="closeFABMenu()">ğŸ“š Practice Mode</a>
    </div>
  </body>
</html>
